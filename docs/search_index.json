[["index.html", "Craft Beer Ratings Analysis Chapter 1 Introduction 1.1 To formulate our questions below,", " Craft Beer Ratings Analysis Krishna Kalluri, Chao Pang 2021-12-08 Chapter 1 Introduction we can define craft beer as a beer made by a brewer that is small, independent, and traditional. According to the Brewers Association (BA), an industry group of mostly small, independent brewers, there are more than 8,000 craft breweries in the U.S. Nearly 4,000 of them opened between 2015–2020. At first We didn’t have a good opinion on Beers, We used to think Beers is much bitter compared to other available alcoholic beverages. Given we did not get to try different Beers from Craft brewers as they are not easily available when compared to Mass produced beers. With gradual incline in craft beer community craft brewers started organizing Beer Festivals and started making craft beers available in multiple locations, that’s when got to try different styles of beers and it changed our perception altogether. we began to try more craft beers and see that those around us were drinking them too. As the community started to grow and we were trying different kinda of beers bunch of mobile applications were released which will let you check in a beer you are having and lets you give you rating for that beer. This kind of helped the community to grow and also help fellow craft beer enthusiast to find new styles of beers from different breweries and identify new breweries. As we both are Craft Beer Enthusiasts, we decided to analyze ratings that were given out to the beers from all the independent breweries in the country because we’ve always suspected the ratings in different regions of the country may not follow the same pattern. 1.1 To formulate our questions below, Find out if there is any correlation between the location of the brewery and the ratings that a brewery is getting Find out the correlation between beer styles and the kind of ratings they receive. As a bonus question, it would be nice to find out the highly rated styles of beers in each state because it would guide us in hunting the best beers in the future. "],["data-sources.html", "Chapter 2 Data sources 2.1 OpenBreweryDB  2.2 Untappd 2.3 Web Scrapper 2.4 Sample Beer Ratings Data: 2.5 Sample Brewery Info Data:", " Chapter 2 Data sources To answer these questions, we’ve obtained data from two sources OpenBreweryDB and Untappd, which we will describe in detail in the following sections. We are still working on obtaining the ingredients of beers, depending on whether or not we will actually acquire the data, our questions may be subject to changes.  2.1 OpenBreweryDB  Open Brewery DB is a free dataset and API with public information on breweries, cideres, brewpubs, and bottle shops. We downloaded lists of breweries per state using the OpenBreweryDB API. List Breweries API We used the brewery names downloaded from OpenBreweryDB as queries to get the list of beers and their corresponding aggregated rating information from the Untappd. 2.2 Untappd Untappd is a social network for beer enthusiasts that allows its users to check-in as they drink beers, share these check-ins, and option to rate the beer they are consuming, earn badges, share pictures of their beers, comment on checked-in beers. It also allows Breweries to officially post the beers that they produce. (paraphrased the definition from Wikipedia). 2.3 Web Scrapper We built a parser to get the list of beers from untappd using Python as we started scrapping data earlier than when we were introduced to web scrapping in R. To use the web scrapper and download the data try following the below steps: $ cd brewery_beer_parser $ pip install -r requirements.txt $ python3 beer_scraping.py -i data/breweries.csv -o brewery_beers/ -s &quot;New York&quot; Once the scrapping is done the data for New York outputs as following All the beers per brewery will be exported to -&gt; brewery_beer_parser/brewery_beers/New_York/*brewery_name.csv All the breweries that the parser could find the beers for will be exported to -&gt; brewery_beer_parser/brewery_beers/New_York_brewery_info.csv Once we repeated this step for all the states we manually copied the state_brewery_info.csv to brewery_beer_parser/Breweries/ we used following python code to merge all the beer data and brewery data. 2.3.1 Merge Beer ratings data path = r&#39;brewery_beers&#39; extension = &#39;.csv&#39; csv_list = [] for root, dirs, files in os.walk(path): for filename in files: if os.path.splitext(filename)[-1] == extension: csv_list.append(os.path.join(root, filename)) frames = [] for file in csv_list: state_and_brewery = file.split(&#39;/&#39;) df = pd.read_csv(file, index_col=False) df.insert(1, &#39;brewery&#39;, state_and_brewery[2].split(&#39;.&#39;)[0]) df.insert(2, &#39;state&#39;, state_and_brewery[2]) df[&#39;state&#39;] = state_and_brewery[1] df[&#39;brewery&#39;] = state_and_brewery[2].split(&#39;.&#39;)[0] df.drop(df.columns[df.columns.str.contains(&#39;unnamed&#39;,case = False)],axis = 1, inplace = True) frames.append(df) # exports to csv file pd.concat(frames).to_csv(&#39;all_beers.csv&#39;) 2.3.2 Merge Brewery Info data brewery_frames = [] for file in breweries_list: df = pd.read_csv(file, index_col=False) df.drop(df.columns[df.columns.str.contains(&#39;unnamed&#39;,case = False)],axis = 1, inplace = True) brewery_frames.append(df) #exports to csv file pd.concat(brewery_frames).to_csv(&#39;all_breweries.csv&#39;) We web scraped the rating information for the top 24 most popular beers for each brewery on Untappd for all the states in US. Because the brewery name downloaded from OpenBreweryDB is not the same as the one used in untappd, we used the untappd search function to resolve the brewery name first, then retrieved the top 24 most popular beers associated with that brewery. We Added State and Brewery name to beer dataset in order to make it easy for us to join brewery data to beer data. ** We did check https://untapped.com/robots.txt to see if scrapping is permitted. They do not have any restrictions under user agents. And we also checked their user agreement. There weren’t any rules about getting data for the list of beers. They only mentioned rules about obtaining user data. 2.4 Sample Beer Ratings Data: ## # A tibble: 20 × 11 ## brewery state beer_url beer_name beer_style beer_desc beer_abv beer_ibu beer_average_ra… beer_num_ratings beer_added ## &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; ## 1 Off_Co… Illi… https:/… Growl Belgian Q… &quot;A big o… 8.5% ABV 28 IBU 3.81 3562 10/01/16 ## 2 Cellar… Cali… https:/… Coffee &amp;… Porter - … &quot;A light… 7.7% ABV 45 IBU 4.12 7511 12/20/13 ## 3 Wind_S… Miss… https:/… Dank Ski… IPA - Ame… &quot;This we… 6.5% ABV 80 IBU 4.05 107 01/14/20 ## 4 Vernal… Utah https:/… Mama&#39;s M… Stout - I… &quot;Sweet, … 8.5% ABV 46 IBU 3.95 1790 11/22/15 ## 5 Mickey… Illi… https:/… Choka We… IPA - Ame… &quot;\\&quot;choka… 7.4% ABV 50 IBU 3.64 433 04/25/13 ## 6 Last_C… Cali… https:/… Squeezew… IPA - Imp… &quot;Double … 7.5% ABV 40 IBU 3.68 51 05/19/19 ## 7 S_S_Fa… New_… https:/… Stone Am… Stout - I… &quot;The cof… 8.7% ABV 65 IBU 3.96 42481 12/18/15 ## 8 Last_C… Cali… https:/… Street C… Sour - Fr… &quot;Sour al… 7.5% ABV N/A IBU 4.31 57 07/11/20 ## 9 Foolpr… Rhod… https:/… Tatou Farmhouse… &quot;Rose sa… 5.9% ABV 30 IBU 3.49 607 03/22/19 ## 10 High_H… Colo… https:/… Barrel A… Red Ale -… &lt;NA&gt; 6.5% ABV 20 IBU 3.75 460 04/06/14 ## 11 Paw_Pa… Mich… https:/… Sleeping… Stout - O… &quot;A smoot… 5.7% ABV 37 IBU 3.59 1320 07/12/15 ## 12 Railho… Nort… https:/… Pomegran… Fruit &quot;This Po… 5.5% ABV N/A IBU 3.5 181 06/04/15 ## 13 Granit… Mary… https:/… Ukulele … IPA - Ame… &quot;Tropica… 6.5% ABV 70 IBU 3.64 4047 08/02/17 ## 14 Small_… Nort… https:/… Castle B… IPA - Bla… &lt;NA&gt; 6.3% ABV N/A IBU 3.72 288 01/25/14 ## 15 Shakop… Minn… https:/… Hard Hea… Schwarzbi… &quot;Enjoy a… 5.3% ABV 26 IBU 3.73 192 11/01/19 ## 16 South_… Cali… https:/… Glacier … Pale Ale … &quot;A class… 5.6% ABV 40 IBU 3.72 917 05/27/13 ## 17 Deschu… Oreg… https:/… Neon Day… Pale Ale … &quot;Let the… 4.8% ABV 35 IBU 3.65 14195 06/17/19 ## 18 Wellsp… Miss… https:/… On the B… Sour - Ot… &quot;The OTB… 4% ABV N/A IBU 3.8 179 07/07/18 ## 19 Northe… Maine https:/… Tail Gun… Brown Ale… &quot;Nutty a… &lt;NA&gt; &lt;NA&gt; NA NA &lt;NA&gt; ## 20 Snowbe… Mich… https:/… Margarit… Sour - Tr… &quot;Flavors… 4.7% ABV 8 IBU 3.66 207 05/05/18 2.5 Sample Brewery Info Data: ## # A tibble: 10 × 25 ## obdb_id name brewery_type street address_2 address_3 city state county_province postal_code website_url phone ## &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;lgl&gt; &lt;lgl&gt; &lt;chr&gt; &lt;chr&gt; &lt;lgl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; ## 1 pollyann… Pollya… micro 431 Ta… NA NA Lemo… Illi… NA 60439-3744 http://www… 6309… ## 2 reach-br… Reach … micro 1343 D… NA NA Asto… Oreg… NA 97103-3917 &lt;NA&gt; 5034… ## 3 gallery-… Galler… brewpub 143 Ke… NA NA Port… Mich… NA 48875-1456 http://www… 5175… ## 4 the-vine… The Vi… micro 1327 N… NA NA Brun… Ohio NA 44212 http://www… 3306… ## 5 lucky-ow… Lucky … micro 8660 T… NA NA Chag… Ohio NA 44023-1876 http://www… 4408… ## 6 trim-tab… Trim T… micro 2721 5… NA NA Birm… Alab… NA 35233-3401 http://www… 2057… ## 7 saint-bo… Saint … brewpub 1701 W… NA NA Ephr… Penn… NA 17522-1106 &lt;NA&gt; 7177… ## 8 moerlein… Moerle… brewpub 115 Jo… NA NA Cinc… Ohio NA 45202-4143 http://www… 5134… ## 9 pike-bre… Pike B… micro 1415 1… NA NA Seat… Wash… NA 98101-2017 http://www… 2066… ## 10 max-lage… Max La… brewpub 320 Pe… NA NA Atla… Geor… NA 30308-3210 http://www… 4045… ## # … with 13 more variables: country &lt;chr&gt;, longitude &lt;dbl&gt;, latitude &lt;dbl&gt;, tags &lt;lgl&gt;, brewery_id &lt;chr&gt;, ## # average_rating &lt;dbl&gt;, num_of_ratings &lt;dbl&gt;, num_of_beers &lt;dbl&gt;, total_check_ins &lt;chr&gt;, ## # unique_user_check_ins &lt;chr&gt;, last_four_week_check_ins &lt;dbl&gt;, brewery_desc &lt;chr&gt;, brewery &lt;chr&gt; "],["data-transformation.html", "Chapter 3 Data transformation", " Chapter 3 Data transformation "],["missing-values.html", "Chapter 4 Missing values", " Chapter 4 Missing values "],["results.html", "Chapter 5 Results", " Chapter 5 Results "],["interactive-component.html", "Chapter 6 Interactive component", " Chapter 6 Interactive component "],["conclusion.html", "Chapter 7 Conclusion", " Chapter 7 Conclusion "]]
