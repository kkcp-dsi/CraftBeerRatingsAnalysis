<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Data transformation | Craft Beer Ratings Analysis</title>
  <meta name="description" content="Chapter 3 Data transformation | Craft Beer Ratings Analysis" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Data transformation | Craft Beer Ratings Analysis" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Data transformation | Craft Beer Ratings Analysis" />
  
  
  

<meta name="author" content="Krishna Kalluri, Chao Pang" />


<meta name="date" content="2021-12-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-sources.html"/>
<link rel="next" href="missing-values.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">CraftBeer</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data sources</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-sources.html"><a href="data-sources.html#openbrewerydb"><i class="fa fa-check"></i><b>2.1</b> <span><strong>OpenBreweryDB</strong></span> </a></li>
<li class="chapter" data-level="2.2" data-path="data-sources.html"><a href="data-sources.html#untappd"><i class="fa fa-check"></i><b>2.2</b> <span><strong>Untappd</strong></span></a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data transformation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-transformation.html"><a href="data-transformation.html#web-scrapper"><i class="fa fa-check"></i><b>3.1</b> <span>Web Scrapper</span></a></li>
<li class="chapter" data-level="3.2" data-path="data-transformation.html"><a href="data-transformation.html#merge-beer-ratings-data"><i class="fa fa-check"></i><b>3.2</b> Merge Beer ratings data</a></li>
<li class="chapter" data-level="3.3" data-path="data-transformation.html"><a href="data-transformation.html#merge-brewery-info-data"><i class="fa fa-check"></i><b>3.3</b> Merge Brewery Info data</a></li>
<li class="chapter" data-level="3.4" data-path="data-transformation.html"><a href="data-transformation.html#data-cleaning"><i class="fa fa-check"></i><b>3.4</b> Data Cleaning</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="data-transformation.html"><a href="data-transformation.html#sample-beer-ratings-data"><i class="fa fa-check"></i><b>3.4.1</b> Sample Beer Ratings Data:</a></li>
<li class="chapter" data-level="3.4.2" data-path="data-transformation.html"><a href="data-transformation.html#sample-brewery-info-data"><i class="fa fa-check"></i><b>3.4.2</b> Sample Brewery Info Data:</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values</a></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a></li>
<li class="chapter" data-level="6" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>6</b> Interactive component</a></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Craft Beer Ratings Analysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-transformation" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> Data transformation</h1>
<div id="web-scrapper" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> <a href="https://github.com/kkcp-dsi/CraftBeerRatingsAnalysis/blob/main/brewery_beer_parser/beer_scraping.py">Web Scrapper</a></h2>
<p>We built a parser to get the list of beers from untappd using Python as
we started scrapping data earlier than when we were introduced to web
scrapping in R.</p>
<p>The web scraper uses beautiful soup a library in python to scrape the
data from web pages.</p>
<p>The process workflow in the web scrapper:</p>
<p>We used the downloaded a csv file from <a href="https://www.openbrewerydb.org/documentation/01-listbreweries"><strong>List Breweries
API</strong></a>then
filter the breweries list from the csv for the state we are trying to
download the data for.</p>
<p>Then the scraper opens <a href="https://untappd.com/search?q=">untappd search
bar</a> to find each breweries page on
untappd and opens a brewery page once the brewery page is opened it goes
to page source and searches for div class <code>beer-list</code> and
<code>distinct-list</code> once it finds the div class it expands the div class
looks for another div class <code>beer-item</code> and gets <code>beer_url</code>,
<code>beer_name</code>, <code>beer_style</code>, <code>beer_desc</code>, <code>beer_abv</code>, <code>beer_ibu</code>,
<code>beer_average_rating</code>, <code>beer_num_ratings</code>, <code>beer_added</code> and adds
everything to a csv.</p>
<p>For the Brewery data we run a similar scrapper to get <code>brewery_id</code>,
<code>average_rating</code>, <code>num_of_ratings</code>, <code>num_of_beers</code>, <code>total_check_ins</code>,
<code>unique_user_check_ins</code>, <code>last_four_week_check_ins</code>, <code>brewery_desc</code> and
adds everything to a csv.</p>
<p>Using this web scrapper we scraped the rating information for the top 24
most popular beers for each brewery on untappd for all the states in US.
Because the brewery name downloaded from OpenBreweryDB is not the same
as the one used in untappd, we used the untappd search function to
resolve the brewery name first, then retrieved the top 24 most popular
beers associated with that brewery.</p>
<p>To use the web scrapper and download the data try following the below
steps:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="data-transformation.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cd brewery_beer_parser</span>
<span id="cb1-2"><a href="data-transformation.html#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="data-transformation.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> pip install <span class="at">-r</span> requirements.txt</span>
<span id="cb1-4"><a href="data-transformation.html#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="data-transformation.html#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> python3 beer_scraping.py <span class="at">-i</span> data/breweries.csv <span class="at">-o</span> brewery_beers/ <span class="at">-s</span> <span class="st">&quot;New York&quot;</span></span></code></pre></div>
<p><strong>Once the scrapping is done the data for New York outputs as
following</strong></p>
<p>All the beers per brewery will be exported to -&gt;
<code>brewery_beer_parser/brewery_beers/New_York/*brewery_name.csv</code></p>
<p>All the breweries that the parser could find the beers for will be
exported to -&gt;
<code>brewery_beer_parser/brewery_beers/New_York_brewery_info.csv</code></p>
<p>Once we repeated this step for all the states we manually copied the
<code>state</code>_brewery_info.csv to <code>brewery_beer_parser/Breweries/</code></p>
<p>we used following python code to merge all the beer data and brewery
data.</p>
</div>
<div id="merge-beer-ratings-data" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Merge Beer ratings data</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="data-transformation.html#cb2-1" aria-hidden="true" tabindex="-1"></a>path <span class="op">=</span> <span class="vs">r&#39;brewery_beers&#39;</span></span>
<span id="cb2-2"><a href="data-transformation.html#cb2-2" aria-hidden="true" tabindex="-1"></a>extension <span class="op">=</span> <span class="st">&#39;.csv&#39;</span></span>
<span id="cb2-3"><a href="data-transformation.html#cb2-3" aria-hidden="true" tabindex="-1"></a>csv_list <span class="op">=</span> []</span>
<span id="cb2-4"><a href="data-transformation.html#cb2-4" aria-hidden="true" tabindex="-1"></a>       </span>
<span id="cb2-5"><a href="data-transformation.html#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> root, dirs, files <span class="kw">in</span> os.walk(path):</span>
<span id="cb2-6"><a href="data-transformation.html#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> filename <span class="kw">in</span> files:</span>
<span id="cb2-7"><a href="data-transformation.html#cb2-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> os.path.splitext(filename)[<span class="op">-</span><span class="dv">1</span>] <span class="op">==</span> extension:</span>
<span id="cb2-8"><a href="data-transformation.html#cb2-8" aria-hidden="true" tabindex="-1"></a>            csv_list.append(os.path.join(root, filename))</span>
<span id="cb2-9"><a href="data-transformation.html#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="data-transformation.html#cb2-10" aria-hidden="true" tabindex="-1"></a>frames <span class="op">=</span> []</span>
<span id="cb2-11"><a href="data-transformation.html#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="bu">file</span> <span class="kw">in</span> csv_list:</span>
<span id="cb2-12"><a href="data-transformation.html#cb2-12" aria-hidden="true" tabindex="-1"></a>    state_and_brewery <span class="op">=</span> <span class="bu">file</span>.split(<span class="st">&#39;/&#39;</span>)</span>
<span id="cb2-13"><a href="data-transformation.html#cb2-13" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> pd.read_csv(<span class="bu">file</span>, index_col<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb2-14"><a href="data-transformation.html#cb2-14" aria-hidden="true" tabindex="-1"></a>    df.insert(<span class="dv">1</span>, <span class="st">&#39;brewery&#39;</span>, state_and_brewery[<span class="dv">2</span>].split(<span class="st">&#39;.&#39;</span>)[<span class="dv">0</span>])</span>
<span id="cb2-15"><a href="data-transformation.html#cb2-15" aria-hidden="true" tabindex="-1"></a>    df.insert(<span class="dv">2</span>, <span class="st">&#39;state&#39;</span>, state_and_brewery[<span class="dv">2</span>])</span>
<span id="cb2-16"><a href="data-transformation.html#cb2-16" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">&#39;state&#39;</span>] <span class="op">=</span> state_and_brewery[<span class="dv">1</span>]</span>
<span id="cb2-17"><a href="data-transformation.html#cb2-17" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">&#39;brewery&#39;</span>] <span class="op">=</span> state_and_brewery[<span class="dv">2</span>].split(<span class="st">&#39;.&#39;</span>)[<span class="dv">0</span>]</span>
<span id="cb2-18"><a href="data-transformation.html#cb2-18" aria-hidden="true" tabindex="-1"></a>    df.drop(df.columns[df.columns.<span class="bu">str</span>.contains(<span class="st">&#39;unnamed&#39;</span>,case <span class="op">=</span> <span class="va">False</span>)],axis <span class="op">=</span> <span class="dv">1</span>, inplace <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb2-19"><a href="data-transformation.html#cb2-19" aria-hidden="true" tabindex="-1"></a>    frames.append(df)</span>
<span id="cb2-20"><a href="data-transformation.html#cb2-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-21"><a href="data-transformation.html#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="co"># exports to csv file</span></span>
<span id="cb2-22"><a href="data-transformation.html#cb2-22" aria-hidden="true" tabindex="-1"></a>pd.concat(frames).to_csv(<span class="st">&#39;all_beers.csv&#39;</span>)</span></code></pre></div>
<p>We Added State and Brewery name to beer dataset in order to make it easy
for us to join brewery data to beer data.</p>
</div>
<div id="merge-brewery-info-data" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Merge Brewery Info data</h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="data-transformation.html#cb3-1" aria-hidden="true" tabindex="-1"></a>breweries_list <span class="op">=</span> []</span>
<span id="cb3-2"><a href="data-transformation.html#cb3-2" aria-hidden="true" tabindex="-1"></a>       </span>
<span id="cb3-3"><a href="data-transformation.html#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> root, dirs, files <span class="kw">in</span> os.walk(path):</span>
<span id="cb3-4"><a href="data-transformation.html#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> filename <span class="kw">in</span> files:</span>
<span id="cb3-5"><a href="data-transformation.html#cb3-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> os.path.splitext(filename)[<span class="op">-</span><span class="dv">1</span>] <span class="op">==</span> extension:</span>
<span id="cb3-6"><a href="data-transformation.html#cb3-6" aria-hidden="true" tabindex="-1"></a>            breweries_list.append(os.path.join(root, filename))</span>
<span id="cb3-7"><a href="data-transformation.html#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="data-transformation.html#cb3-8" aria-hidden="true" tabindex="-1"></a>brewery_frames <span class="op">=</span> []</span>
<span id="cb3-9"><a href="data-transformation.html#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="bu">file</span> <span class="kw">in</span> breweries_list:</span>
<span id="cb3-10"><a href="data-transformation.html#cb3-10" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> pd.read_csv(<span class="bu">file</span>, index_col<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb3-11"><a href="data-transformation.html#cb3-11" aria-hidden="true" tabindex="-1"></a>    df.drop(df.columns[df.columns.<span class="bu">str</span>.contains(<span class="st">&#39;unnamed&#39;</span>,case <span class="op">=</span> <span class="va">False</span>)],axis <span class="op">=</span> <span class="dv">1</span>, inplace <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb3-12"><a href="data-transformation.html#cb3-12" aria-hidden="true" tabindex="-1"></a>    brewery_frames.append(df)</span>
<span id="cb3-13"><a href="data-transformation.html#cb3-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-14"><a href="data-transformation.html#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="co">#exports to csv file    </span></span>
<span id="cb3-15"><a href="data-transformation.html#cb3-15" aria-hidden="true" tabindex="-1"></a>pd.concat(brewery_frames).to_csv(<span class="st">&#39;all_breweries.csv&#39;</span>)</span></code></pre></div>
<p>** We did check <a href="https://untapped.com/robots.txt" class="uri">https://untapped.com/robots.txt</a> to see if scrapping
is permitted. They do not have any restrictions under user agents. And
we also checked their user agreement. There weren’t any rules about
getting data for the list of beers. They only mentioned rules about
obtaining user data.</p>
</div>
<div id="data-cleaning" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Data Cleaning</h2>
<div id="sample-beer-ratings-data" class="section level3" number="3.4.1">
<h3><span class="header-section-number">3.4.1</span> Sample Beer Ratings Data:</h3>
<pre><code>## # A tibble: 20 × 11
##    brewery   state  beer_url       beer_name beer_style  beer_desc       beer_abv beer_ibu beer_average_ra…
##    &lt;chr&gt;     &lt;chr&gt;  &lt;chr&gt;          &lt;chr&gt;     &lt;chr&gt;       &lt;chr&gt;           &lt;chr&gt;    &lt;chr&gt;               &lt;dbl&gt;
##  1 Dry_Coun… North… https://untap… Bone Mus… Stout - Ru… &lt;NA&gt;            11.1% A… N/A IBU              4.12
##  2 Off_Camb… Washi… https://untap… Imperial… Pumpkin / … &lt;NA&gt;            9% ABV   N/A IBU              4.02
##  3 Chapel_B… Minne… https://untap… DDH Citr… IPA - Brut  &lt;NA&gt;            6% ABV   N/A IBU             NA   
##  4 Noble_Ro… Wisco… https://untap… Cherry B… Pale Ale -… Brewed with br… 5.5% ABV 24 IBU               3.46
##  5 Bluejack… Distr… https://untap… Darling … Pale Ale -… american pale … 6.4% ABV 50 IBU               3.64
##  6 Beach_Ha… New_J… https://untap… Flannel   Red Ale - … A Carrot Cake … 6.3% ABV 26 IBU               3.67
##  7 Lookingg… Oregon https://untap… T Minus … Pale Ale -… Combination of… 6% ABV   45 IBU               3.42
##  8 Mia_and_… Oregon https://untap… Emmet &amp; … Pilsner - … &lt;NA&gt;            4.4% ABV N/A IBU              2.93
##  9 Quaff_On… India… https://untap… McRyan O… Stout - Ir… &lt;NA&gt;            8% ABV   25 IBU               3.56
## 10 Foggy_No… Washi… https://untap… Cease &amp; … IPA - Engl… Brewed in hono… 6.3% ABV 70 IBU               3.38
## 11 Riggs_Be… Illin… https://untap… Black IPL IPA - Blac… Roast. Coffee.… 7.3% ABV 65 IBU               3.76
## 12 Johnnie_… Nebra… https://untap… The Aven… Wheat  - A… Clean, easy dr… 5.51% A… 18 IBU               3.38
## 13 Courthou… Wisco… https://untap… Patio Po… Shandy / R… A raspberry li… 4.8% ABV 12 IBU               3.7 
## 14 Wind_Shi… Misso… https://untap… Dark Mild Mild - Oth… &lt;NA&gt;            4% ABV   18 IBU               4.01
## 15 Skookum_… Washi… https://untap… Solitary… Stout - Im… Bourbon barrel… 10.5% A… 50 IBU               4.2 
## 16 Bang_Bre… Minne… https://untap… Scratchy… IPA - Blac… &lt;NA&gt;            6% ABV   56 IBU               3.76
## 17 Ten_Mile… Calif… https://untap… Sunnyside Pilsner - … &lt;NA&gt;            4.8% ABV N/A IBU              3.82
## 18 BS_Brewi… Texas  https://untap… Tiki Tem… Sour - Ber… Tart with the … 4.3% ABV 5 IBU                3.55
## 19 Stones_T… Washi… https://untap… Mickey&#39;s… Red Ale - … Mickey&#39;s Irish… 6% ABV   N/A IBU              3.55
## 20 Amplifie… Calif… https://untap… Doc März… Märzen      Traditional mä… 5.3% ABV N/A IBU              3.68
## # … with 2 more variables: beer_num_ratings &lt;dbl&gt;, beer_added &lt;chr&gt;</code></pre>
</div>
<div id="sample-brewery-info-data" class="section level3" number="3.4.2">
<h3><span class="header-section-number">3.4.2</span> Sample Brewery Info Data:</h3>
<pre><code>## # A tibble: 10 × 25
##    obdb_id     name     brewery_type street   address_2 address_3 city   state  county_province postal_code
##    &lt;chr&gt;       &lt;chr&gt;    &lt;chr&gt;        &lt;chr&gt;    &lt;lgl&gt;     &lt;lgl&gt;     &lt;chr&gt;  &lt;chr&gt;  &lt;lgl&gt;           &lt;chr&gt;      
##  1 redhook-br… Redhook… regional     714 E P… NA        NA        Seatt… Washi… NA              98122-4697 
##  2 railhouse-… Railhou… micro        105 E S… NA        NA        Aberd… North… NA              28315-     
##  3 westtown-b… Westtow… micro        236 Sch… NA        NA        Westt… New Y… NA              10998-     
##  4 spencer-br… Spencer… micro        167 N S… NA        NA        Spenc… Massa… NA              01562-1232 
##  5 hair-of-th… Hair of… brewpub      61 SE Y… NA        NA        Portl… Oregon NA              97214-2134 
##  6 swiftwater… Swiftwa… brewpub      378 Mou… NA        NA        Roche… New Y… NA              14620-1250 
##  7 kinney-cre… Kinney … micro        1016 7t… NA        NA        Roche… Minne… NA              55901-2668 
##  8 saugatuck-… Saugatu… micro        2948 Bl… NA        NA        Dougl… Michi… NA              49406-5195 
##  9 1817-brewe… 1817 Br… micro        100 B S… NA        NA        okolo… Missi… NA              38860      
## 10 solorio-br… Solorio… micro        9395 Fe… NA        NA        Ranch… Calif… NA              91730-4565 
## # … with 15 more variables: website_url &lt;chr&gt;, phone &lt;chr&gt;, country &lt;chr&gt;, longitude &lt;dbl&gt;,
## #   latitude &lt;dbl&gt;, tags &lt;lgl&gt;, brewery_id &lt;chr&gt;, average_rating &lt;dbl&gt;, num_of_ratings &lt;dbl&gt;,
## #   num_of_beers &lt;dbl&gt;, total_check_ins &lt;chr&gt;, unique_user_check_ins &lt;chr&gt;,
## #   last_four_week_check_ins &lt;dbl&gt;, brewery_desc &lt;chr&gt;, brewery &lt;chr&gt;</code></pre>
<p>We cleaned up the beer_abv column by removing the characters <code>% ABV</code> and
beer_ibu column by removing the characters <code>IBU</code> .</p>
<p>Cleaned up date values to same format and added a new column named year.</p>
<p>Generalized known similar types of beer styles</p>
<p>Cleaned up state name in cleaned_all_beers to remove <code>_</code> ’s</p>
<p>Remove unusable columns in all_breweries data frame and rename name
column</p>
<p>Cleaned breweries with less than 10 beers total and the breweries which
are closed, proprietor, bar as there are mostly useless for our
question.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-sources.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="missing-values.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/kkcp-dsi/CraftBeerRatingsAnalysis/edit/main/03-cleaning.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/kkcp-dsi/CraftBeerRatingsAnalysis/blob/main/03-cleaning.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
